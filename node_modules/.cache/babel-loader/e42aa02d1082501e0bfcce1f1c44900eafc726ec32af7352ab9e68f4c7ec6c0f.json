{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\n\n// 4- Custom hook\nexport const useFetch = url => {\n  _s();\n  const [data, setData] = useState(null);\n\n  // 5- refatorando o POST\n  const [config, setConfig] = useState(null);\n  const [method, setMethod] = useState(null);\n  const [callFetch, setCallFetch] = useState(false);\n\n  // 6- loading\n  const [loading, setLoading] = useState(false);\n\n  // 7- tratando erros\n  const [error, setError] = useState(null);\n\n  // 8- desafio 6\n  const [itemId, setItemId] = useState(null);\n  const httpConfig = (data, method) => {\n    if (method === \"POST\") {\n      setConfig({\n        method,\n        headers: {\n          \"content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      });\n      setMethod(method);\n    } else if (method === \"DELETE\") {\n      setConfig({\n        method,\n        headers: {\n          \"content-Type\": \"application/json\"\n        }\n      });\n      setMethod(method);\n      setItemId(data);\n    }\n  };\n  useEffect(() => {\n    const fetchData = async () => {\n      // 6- loading\n      setLoading(true);\n      try {\n        const res = await fetch(url);\n        const json = await res.json();\n        setData(json);\n      } catch (error) {\n        console.log(error.message);\n        setError(\"Houve algum erro ao carregar os dados!\");\n      }\n      setLoading(false);\n    };\n    fetchData();\n  }, [url, callFetch]);\n\n  // 5- refatorando post\n  useEffect(() => {\n    const httpRequest = async () => {\n      if (method === \"POST\") {\n        let fethOptions = [url, config];\n        const res = await fetch(...fethOptions);\n        const json = await res.json();\n        setCallFetch(json);\n      } else if (method === \"DELETE\") {\n        const deleteUrl = `${url}/${itemId}`;\n        const res = await fetch(deleteUrl, config);\n        const json = await res.json();\n        setCallFetch(json);\n      }\n    };\n    httpRequest();\n  }, [config, method, url]);\n  return {\n    data,\n    httpConfig,\n    loading,\n    error\n  };\n};\n_s(useFetch, \"ThB/pDYj2Nd6I7cr6eAzH+GUIBY=\");","map":{"version":3,"names":["useState","useEffect","useFetch","url","_s","data","setData","config","setConfig","method","setMethod","callFetch","setCallFetch","loading","setLoading","error","setError","itemId","setItemId","httpConfig","headers","body","JSON","stringify","fetchData","res","fetch","json","console","log","message","httpRequest","fethOptions","deleteUrl"],"sources":["/home/mariana/Documents/projeto perfil/src/hooks/useFetch.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\n\n// 4- Custom hook\nexport const useFetch = (url)=>{\n    const [data, setData]= useState(null)\n\n// 5- refatorando o POST\n    const [config, setConfig]= useState(null)\n    const [method, setMethod]= useState(null)\n    const [callFetch, setCallFetch]= useState(false)\n\n// 6- loading\n    const [loading, setLoading]= useState(false)\n\n// 7- tratando erros\n    const [error, setError]= useState(null)\n\n// 8- desafio 6\n    const [itemId, setItemId]= useState(null)\n\n    const httpConfig = (data, method)=>{\n        if (method === \"POST\"){\n            setConfig({\n                method,\n                headers:{\n                    \"content-Type\": \"application/json\",\n                },\n                body: JSON.stringify(data),\n\n            })\n\n            setMethod(method)\n        } else if (method === \"DELETE\"){\n            setConfig({\n                method,\n                headers:{\n                    \"content-Type\": \"application/json\",\n                }\n            })\n\n            setMethod(method)\n            setItemId(data)\n        }\n    }\n\n    useEffect(()=>{\n        const fetchData = async ()=>{\n\n    // 6- loading\n            setLoading(true)\n\n        try {\n            const res = await fetch(url)\n            const json = await res.json()\n\n            setData(json)\n        } catch (error) {\n            console.log(error.message)\n            setError(\"Houve algum erro ao carregar os dados!\")\n        }\n            setLoading(false)\n        }\n    \n    fetchData()\n\n    },[url, callFetch])\n\n// 5- refatorando post\n    useEffect(()=>{\n    \n        const httpRequest = async ()=>{\n            if(method === \"POST\"){\n                let fethOptions = [url, config]\n                const res = await fetch(...fethOptions)\n                const json = await res.json()\n    \n                setCallFetch(json)\n            } else if(method === \"DELETE\"){\n                const deleteUrl = `${url}/${itemId}`\n\n                const res = await fetch(deleteUrl, config)\n                const json = await res.json()\n\n                setCallFetch(json)\n            }\n        }\n\n        httpRequest()\n\n    },[config, method, url])\n\n    return {data, httpConfig, loading, error}\n}\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;;AAE3C;AACA,OAAO,MAAMC,QAAQ,GAAIC,GAAG,IAAG;EAAAC,EAAA;EAC3B,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAEN,QAAQ,CAAC,IAAI,CAAC;;EAEzC;EACI,MAAM,CAACO,MAAM,EAAEC,SAAS,CAAC,GAAER,QAAQ,CAAC,IAAI,CAAC;EACzC,MAAM,CAACS,MAAM,EAAEC,SAAS,CAAC,GAAEV,QAAQ,CAAC,IAAI,CAAC;EACzC,MAAM,CAACW,SAAS,EAAEC,YAAY,CAAC,GAAEZ,QAAQ,CAAC,KAAK,CAAC;;EAEpD;EACI,MAAM,CAACa,OAAO,EAAEC,UAAU,CAAC,GAAEd,QAAQ,CAAC,KAAK,CAAC;;EAEhD;EACI,MAAM,CAACe,KAAK,EAAEC,QAAQ,CAAC,GAAEhB,QAAQ,CAAC,IAAI,CAAC;;EAE3C;EACI,MAAM,CAACiB,MAAM,EAAEC,SAAS,CAAC,GAAElB,QAAQ,CAAC,IAAI,CAAC;EAEzC,MAAMmB,UAAU,GAAGA,CAACd,IAAI,EAAEI,MAAM,KAAG;IAC/B,IAAIA,MAAM,KAAK,MAAM,EAAC;MAClBD,SAAS,CAAC;QACNC,MAAM;QACNW,OAAO,EAAC;UACJ,cAAc,EAAE;QACpB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAClB,IAAI;MAE7B,CAAC,CAAC;MAEFK,SAAS,CAACD,MAAM,CAAC;IACrB,CAAC,MAAM,IAAIA,MAAM,KAAK,QAAQ,EAAC;MAC3BD,SAAS,CAAC;QACNC,MAAM;QACNW,OAAO,EAAC;UACJ,cAAc,EAAE;QACpB;MACJ,CAAC,CAAC;MAEFV,SAAS,CAACD,MAAM,CAAC;MACjBS,SAAS,CAACb,IAAI,CAAC;IACnB;EACJ,CAAC;EAEDJ,SAAS,CAAC,MAAI;IACV,MAAMuB,SAAS,GAAG,MAAAA,CAAA,KAAU;MAEhC;MACQV,UAAU,CAAC,IAAI,CAAC;MAEpB,IAAI;QACA,MAAMW,GAAG,GAAG,MAAMC,KAAK,CAACvB,GAAG,CAAC;QAC5B,MAAMwB,IAAI,GAAG,MAAMF,GAAG,CAACE,IAAI,EAAE;QAE7BrB,OAAO,CAACqB,IAAI,CAAC;MACjB,CAAC,CAAC,OAAOZ,KAAK,EAAE;QACZa,OAAO,CAACC,GAAG,CAACd,KAAK,CAACe,OAAO,CAAC;QAC1Bd,QAAQ,CAAC,wCAAwC,CAAC;MACtD;MACIF,UAAU,CAAC,KAAK,CAAC;IACrB,CAAC;IAELU,SAAS,EAAE;EAEX,CAAC,EAAC,CAACrB,GAAG,EAAEQ,SAAS,CAAC,CAAC;;EAEvB;EACIV,SAAS,CAAC,MAAI;IAEV,MAAM8B,WAAW,GAAG,MAAAA,CAAA,KAAU;MAC1B,IAAGtB,MAAM,KAAK,MAAM,EAAC;QACjB,IAAIuB,WAAW,GAAG,CAAC7B,GAAG,EAAEI,MAAM,CAAC;QAC/B,MAAMkB,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGM,WAAW,CAAC;QACvC,MAAML,IAAI,GAAG,MAAMF,GAAG,CAACE,IAAI,EAAE;QAE7Bf,YAAY,CAACe,IAAI,CAAC;MACtB,CAAC,MAAM,IAAGlB,MAAM,KAAK,QAAQ,EAAC;QAC1B,MAAMwB,SAAS,GAAI,GAAE9B,GAAI,IAAGc,MAAO,EAAC;QAEpC,MAAMQ,GAAG,GAAG,MAAMC,KAAK,CAACO,SAAS,EAAE1B,MAAM,CAAC;QAC1C,MAAMoB,IAAI,GAAG,MAAMF,GAAG,CAACE,IAAI,EAAE;QAE7Bf,YAAY,CAACe,IAAI,CAAC;MACtB;IACJ,CAAC;IAEDI,WAAW,EAAE;EAEjB,CAAC,EAAC,CAACxB,MAAM,EAAEE,MAAM,EAAEN,GAAG,CAAC,CAAC;EAExB,OAAO;IAACE,IAAI;IAAEc,UAAU;IAAEN,OAAO;IAAEE;EAAK,CAAC;AAC7C,CAAC;AAAAX,EAAA,CAzFYF,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}